Traceback (most recent call last):
  File "/home/thormakai/anaconda3/envs/myenv/lib/python3.8/site-packages/jupyter_cache/executors/utils.py", line 51, in single_nb_execution
    executenb(
  File "/home/thormakai/anaconda3/envs/myenv/lib/python3.8/site-packages/nbclient/client.py", line 1112, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "/home/thormakai/anaconda3/envs/myenv/lib/python3.8/site-packages/nbclient/util.py", line 74, in wrapped
    return just_run(coro(*args, **kwargs))
  File "/home/thormakai/anaconda3/envs/myenv/lib/python3.8/site-packages/nbclient/util.py", line 53, in just_run
    return loop.run_until_complete(coro)
  File "/home/thormakai/anaconda3/envs/myenv/lib/python3.8/asyncio/base_events.py", line 616, in run_until_complete
    return future.result()
  File "/home/thormakai/anaconda3/envs/myenv/lib/python3.8/site-packages/nbclient/client.py", line 553, in async_execute
    await self.async_execute_cell(
  File "/home/thormakai/anaconda3/envs/myenv/lib/python3.8/site-packages/nbclient/client.py", line 857, in async_execute_cell
    self._check_raise_for_error(cell, exec_reply)
  File "/home/thormakai/anaconda3/envs/myenv/lib/python3.8/site-packages/nbclient/client.py", line 760, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
# the survey data
sdata = pd.read_csv("resources/preprocessed/hd_samples_2020.csv")
sdata['date'] = pd.to_datetime(sdata.date)
sdata = sdata[(sdata.date > "2020-05-31")&(sdata.date < "2020-10-01")].copy()

# set some variables for the charts
xlab_k14 = {'labelpad':10, 'fontsize':14}
sns.set_style('whitegrid')

fig, axs = plt.subplots(1, 2, figsize=(10,5))

ax = axs[0]

data = sdata.groupby(['loc_date', 'date'], as_index=False).species_slug.nunique()

sns.scatterplot(data=data, x='date', y=data.species_slug, ax=ax)
ax.xaxis.set_major_locator(mdates.MonthLocator(interval=1))
ax.xaxis.set_major_formatter(mdates.DateFormatter('%b'))
# ax.get_legend().remove()
ax.set_xlabel(" ")
ax.set_ylabel("Number of species per sample", **xlab_k14)
axtwo = axs[1]

sdata['month'] = sdata.date.dt.month_name()
sdata['eom'] = sdata['date'].map(lambda x: pd.Period(x, freq='M').end_time.date())

data = sdata.groupby(['month', 'eom'], as_index=False).agg({'species_slug':'nunique', 'loc_date':'nunique'})
datax = data.sort_values(by="eom")
data = datax[["month", "species_slug", "loc_date"]].copy()
data.rename(columns={"species_slug":"n species", "loc_date":"n samples"}, inplace=True)

# clean up the axis
hide_spines_ticks_grids(axtwo)

# add a table to the axis with data
the_table_ax = axtwo.table(data.values,  colLabels=data.columns, colWidths=[.33, .33, .33], bbox=[0, 0, 1, 1])

# make the table pretty
a_summary_table_one = make_a_summary_table(the_table_ax,data,data.columns, font_size=16, s_et_bottom_row=False)

# remove the cell text from [0,0], the index name
a_summary_table_one.get_celld()[(0,0)].get_text().set_text(" ")

plt.tight_layout()
plt.show()
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mNameError[0m                                 Traceback (most recent call last)
[0;32m/tmp/ipykernel_20236/3562320440.py[0m in [0;36m<module>[0;34m[0m
[1;32m     31[0m [0;34m[0m[0m
[1;32m     32[0m [0;31m# clean up the axis[0m[0;34m[0m[0;34m[0m[0;34m[0m[0m
[0;32m---> 33[0;31m [0mhide_spines_ticks_grids[0m[0;34m([0m[0maxtwo[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[0m[1;32m     34[0m [0;34m[0m[0m
[1;32m     35[0m [0;31m# add a table to the axis with data[0m[0;34m[0m[0;34m[0m[0;34m[0m[0m

[0;31mNameError[0m: name 'hide_spines_ticks_grids' is not defined
NameError: name 'hide_spines_ticks_grids' is not defined

